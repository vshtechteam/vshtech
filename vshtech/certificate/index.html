<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <title>Trung tâm eSign &amp; chứng chỉ · VSH TECH</title>
  <meta name="color-scheme" content="dark">
  <meta name="theme-color" content="#050716">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

    :root{
      --bg:#010310;
      --bg-soft:#070e24;
      --surface:rgba(8,12,24,.72);
      --surface-strong:rgba(255,255,255,.08);
      --text:#f5f7fc;
      --muted:#b3bbcf;
      --accent:#7f80ff;
      --accent2:#5de0ff;
      --stroke:rgba(255,255,255,.18);
      --glow:rgba(127,128,255,.22);
      --cer-emerald:#7ff8d8;
      --cer-gold:#f7f0d3;
    }

    *{box-sizing:border-box}
    html,body{height:100%;-webkit-text-size-adjust:100%}
    body{
      margin:0;
      font-family:Poppins,'Inter','SF Pro Display',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      background:
        radial-gradient(circle at 18% -10%,rgba(125,255,230,.18),transparent 60%),
        radial-gradient(circle at 82% -5%,rgba(127,128,255,.24),transparent 60%),
        linear-gradient(180deg,#01030f 0%,#040b1d 46%,#08142c 100%);
      color:var(--text);
      line-height:1.65;
      min-height:100vh;
      overflow-x:hidden;
    }
    body::before{
      content:"";
      position:fixed;
      inset:0;
      z-index:-3;
      background:
        radial-gradient(circle at 30% 30%,rgba(255,255,255,.06),transparent 62%),
        radial-gradient(circle at 75% 12%,rgba(127,128,255,.12),transparent 60%),
        repeating-conic-gradient(from -10deg, rgba(247,240,211,.03) 0deg 4deg, transparent 4deg 8deg);
      filter:blur(120px);
      opacity:.95;
      pointer-events:none;
      mask-image:radial-gradient(circle at 50% 45%,rgba(255,255,255,.8),transparent 70%);
    }
    body::after{
      content:"";
      position:fixed;
      inset:0;
      z-index:-4;
      background-image:
        linear-gradient(120deg,rgba(255,255,255,.05) 0,transparent 35%),
        linear-gradient(0deg,rgba(255,255,255,.02) 0,transparent 60%),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Cdefs%3E%3CradialGradient id='g' cx='50%25' cy='45%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%23ffffff' stop-opacity='.06'/%3E%3Cstop offset='100%25' stop-color='%23ffffff' stop-opacity='0'/%3E%3C/radialGradient%3E%3C/defs%3E%3Cpath fill='url(%23g)' d='M0 0h400v400H0z'/%3E%3Cpath d='M0 200h400M200 0v400' stroke='%23ffffff' stroke-opacity='.02'/%3E%3C/svg%3E");
      mix-blend-mode:screen;
      pointer-events:none;
    }

    a{color:inherit;text-decoration:none}
    button{font-family:inherit;font-size:1rem;background:none;border:0;color:inherit}

    .bg-decor{
      position:fixed;
      inset:0;
      z-index:-2;
      pointer-events:none;
    }
    .orb{
      position:absolute;
      width:420px;
      height:420px;
      border-radius:999px;
      filter:blur(18px);
      opacity:.65;
      animation:drift 24s ease-in-out infinite;
    }
    .orb-1{top:-160px;left:-80px;background:radial-gradient(circle at 30% 30%,rgba(93,224,255,.78),transparent 60%)}
    .orb-2{bottom:6%;right:-160px;background:radial-gradient(circle at 60% 40%,rgba(127,128,255,.78),transparent 60%);animation-delay:4s}
    .orb-3{top:35%;right:10%;width:320px;height:320px;background:radial-gradient(circle at 40% 40%,rgba(255,255,255,.16),transparent 70%);animation-duration:32s}
    .cer-ring{
      position:absolute;
      width:720px;
      height:720px;
      top:12%;
      left:50%;
      transform:translate(-50%,-12%);
      border-radius:50%;
      background:
        radial-gradient(circle at center,rgba(127,128,255,.25),transparent 55%),
        repeating-conic-gradient(from -20deg, rgba(247,240,211,.18) 0deg 8deg, transparent 8deg 16deg);
      mix-blend-mode:screen;
      opacity:.38;
      filter:blur(.4px);
    }
    .cer-ring::after{
      content:"";
      position:absolute;
      inset:80px;
      border-radius:50%;
      border:1px solid rgba(255,255,255,.18);
      background:radial-gradient(circle,rgba(125,255,230,.22),transparent 70%);
    }
    .cer-grid{
      position:absolute;
      inset:-5%;
      background:
        repeating-linear-gradient(120deg, rgba(247,240,211,.05) 0 140px, transparent 140px 280px),
        repeating-linear-gradient(60deg, rgba(93,224,255,.04) 0 150px, transparent 150px 300px);
      opacity:.25;
      mix-blend-mode:soft-light;
      filter:blur(1px);
    }
    @keyframes drift{
      0%{transform:translate3d(0,0,0) scale(1)}
      50%{transform:translate3d(20px,40px,0) scale(1.08)}
      100%{transform:translate3d(0,0,0) scale(1)}
    }

    .scrollbar{
      position:fixed;
      top:0;
      left:0;
      right:0;
      height:4px;
      z-index:2000;
      background:rgba(255,255,255,.06);
      border-bottom:1px solid rgba(0,0,0,.4);
    }
    .scrollbar .fill{
      height:100%;
      width:0%;
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      box-shadow:0 0 16px rgba(34,211,238,.35);
      transition:width .12s linear;
    }

    .hero{
      padding:clamp(36px,8vw,90px) clamp(22px,6vw,100px) 20px;
    }
    .hero-inner{
      max-width:1200px;
      margin:0 auto;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
      gap:48px;
      align-items:center;
      border:1px solid rgba(255,255,255,.08);
      border-radius:36px;
      padding:clamp(28px,4vw,48px);
      background:rgba(6,10,23,.72);
      box-shadow:0 45px 120px rgba(2,5,12,.85);
      backdrop-filter:blur(28px) saturate(140%);
    }
    .hero-copy h1{
      margin:14px 0 12px;
      font-size:clamp(32px,4vw,54px);
      line-height:1.1;
      background:linear-gradient(120deg,var(--text),rgba(109,119,255,.9));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .hero-copy p{color:var(--muted);max-width:480px;margin-bottom:24px}
    .eyebrow{
      letter-spacing:.2em;
      font-size:.72rem;
      text-transform:uppercase;
      color:rgba(255,255,255,.65);
      display:inline-block;
    }
    .hero-cta{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:24px}
    .hero-stats{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:14px;
    }
    .stat-card{
      padding:18px 20px;
      border:1px solid rgba(255,255,255,.14);
      border-radius:22px;
      background:rgba(255,255,255,.05);
      box-shadow:0 25px 55px rgba(0,0,0,.4);
    }
    .stat-card strong{display:block;font-size:1.8rem;line-height:1.1}
    .stat-card span{font-size:.9rem;color:var(--muted)}
    .stat-card.sync{
      align-items:flex-start;
      gap:8px;
      background:linear-gradient(135deg,rgba(8,18,36,.8),rgba(14,28,62,.82));
      border:1px solid rgba(255,255,255,.2);
    }
    .stat-card.sync span{
      font-size:.78rem;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:rgba(255,255,255,.65);
    }
    .stat-card.sync strong{font-size:1.2rem;line-height:1.3}
    .stat-card.sync small{font-size:.8rem;color:rgba(255,255,255,.65)}

    .hero-visual{
      position:relative;
      min-height:380px;
      padding:10px 0 40px;
    }
    .floating-card{
      position:absolute;
      right:0;
      padding:20px;
      border-radius:22px;
      background:var(--surface-strong);
      border:1px solid rgba(255,255,255,.22);
      box-shadow:0 25px 60px rgba(0,0,0,.45),0 0 50px rgba(127,128,255,.18);
      backdrop-filter:blur(24px) saturate(160%);
      max-width:320px;
      animation:float 8s ease-in-out infinite;
    }
    .floating-card h3{margin:6px 0 10px;font-size:1.3rem}
    .floating-card p{margin:0 0 14px;color:var(--muted)}
    .floating-card ul{margin:0;padding-left:18px;color:var(--muted);font-size:.9rem}
    .floating-card li{margin:4px 0}
    .floating-card .tag{
      font-size:.75rem;
      color:var(--accent2);
      text-transform:uppercase;
      letter-spacing:.12em;
    }
    @keyframes float{
      0%{transform:translateY(0)}
      50%{transform:translateY(-16px)}
      100%{transform:translateY(0)}
    }

    .shell{
      max-width:1100px;
      margin:-20px auto clamp(40px,8vw,90px);
      display:flex;
      flex-direction:column;
      gap:24px;
      padding:0 clamp(22px,6vw,100px) 80px;
    }

    .panel{
      position:relative;
      border-radius:26px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(5,8,18,.85);
      box-shadow:0 35px 90px rgba(1,3,8,.82);
      backdrop-filter:blur(32px) saturate(160%);
      padding:32px;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute;
      inset:1px;
      border-radius:24px;
      border:1px solid rgba(255,255,255,.03);
      pointer-events:none;
    }
    .panel.highlight{
      background:linear-gradient(140deg,rgba(8,14,32,.92),rgba(11,22,52,.88));
      box-shadow:0 45px 110px rgba(0,0,0,.55),0 0 120px rgba(127,128,255,.22);
    }
    .panel-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      margin-bottom:18px;
    }
    .panel-head h2{margin:8px 0 0;font-size:1.8rem}
    .pill{
      padding:6px 12px;
      border-radius:99px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.05);
      font-size:.78rem;
      letter-spacing:.08em;
      text-transform:uppercase;
    }
    .pill.glow{
      border-color:rgba(109,119,255,.4);
      color:var(--accent2);
      box-shadow:0 0 18px rgba(109,119,255,.35);
    }
    .desc{margin:0 0 24px;color:var(--muted);max-width:640px}

    .btn{
      appearance:none;
      border:none;
      border-radius:14px;
      padding:12px 20px;
      font-weight:600;
      cursor:pointer;
      transition:transform .1s ease,filter .2s ease,box-shadow .2s ease;
      color:var(--text);
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 20px 45px rgba(0,0,0,.45);
    }
    .btn.primary{
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      color:#01030a;
      box-shadow:0 25px 60px rgba(93,224,255,.35);
    }
    .btn.ghost{
      background:rgba(4,8,18,.8);
      color:var(--muted);
    }
    .btn.min{padding:10px 16px;border-radius:12px;font-size:.92rem}
    .btn:hover{filter:saturate(1.1)}
    .btn:active{transform:translateY(1px)}

    .cta-row{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:16px}

    .acc{
      border-radius:22px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.02);
      box-shadow:0 30px 60px rgba(0,0,0,.45),0 0 30px rgba(127,128,255,.12) inset;
      backdrop-filter:blur(18px);
    }
    .acc-hd{
      width:100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:18px 22px;
      cursor:pointer;
      gap:18px;
      background:transparent;
    }
    .acc-copy strong{display:block;font-size:1.1rem}
    .acc-copy span{font-size:.88rem;color:var(--muted)}
    .acc-hd:hover{background:rgba(255,255,255,.02)}
    .chev{transition:transform .2s ease}
    .acc[aria-expanded="true"] .chev{transform:rotate(90deg)}
    .acc-bd{max-height:0;overflow:hidden;transition:max-height .25s ease}
    .acc-inner{padding:0 22px 24px}

    .apps{
      margin-top:20px;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:14px;
    }
    .app-card{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      padding:20px;
      background:linear-gradient(145deg,rgba(255,255,255,.06),rgba(255,255,255,.015));
      box-shadow:0 25px 55px rgba(0,0,0,.45);
      transition:transform .15s ease,border-color .15s ease,box-shadow .15s ease;
    }
    .app-card:hover{
      transform:translateY(-4px);
      border-color:rgba(255,255,255,.25);
      box-shadow:0 30px 60px rgba(0,0,0,.55);
    }
    .app-head{display:flex;align-items:center;gap:12px}
    .app-icon{
      width:42px;
      height:42px;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:#050b18;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      box-shadow:0 6px 16px rgba(0,0,0,.45);
    }
    .app-title{font-weight:700;font-size:1.05rem}
    .app-note{margin:8px 0 12px;color:var(--muted);font-size:.9rem;min-height:36px}
    .app-actions{display:flex;gap:10px}
    .btn.install{flex:1;text-align:center}

    .link-line{
      margin-top:18px;
      padding:14px 18px;
      border-radius:16px;
      border:1px dashed rgba(255,255,255,.22);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      background:rgba(255,255,255,.03);
      backdrop-filter:blur(12px);
    }
    .link-line > div{flex:1;min-width:0}
    .link-line a{
      color:var(--accent2);
      font-weight:600;
      font-size:.92rem;
      text-decoration:none;
      word-break:break-all;
      overflow-wrap:anywhere;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .link-line svg{opacity:.6}
    .hint,.ok{color:var(--muted);font-size:.92rem;margin:0 0 6px}
    .ok{color:#8df7ff;display:none}
    .ok.show{display:block}

    .steps .timeline{
      list-style:none;
      margin:0;
      padding:0;
    }
    .timeline li{
      display:grid;
      grid-template-columns:1fr auto;
      align-items:start;
      gap:12px;
      padding:16px 0;
      border-bottom:1px solid rgba(255,255,255,.07);
    }
    .timeline li:last-child{border-bottom:0}
    .timeline strong{display:block;font-size:1.05rem;margin-bottom:4px}
    .timeline span{
      font-size:1rem;
      padding:4px 8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
    }

    .micro{font-size:.82rem;color:var(--muted)}
    .micro.muted{opacity:.8}
    .note{margin:0 auto;text-align:center}
    code{
      font-family:'JetBrains Mono','SFMono-Regular','Menlo',monospace;
      font-size:.78rem;
      padding:2px 6px;
      border-radius:8px;
      background:rgba(255,255,255,.08);
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%) translateY(12px);
      background:rgba(5,9,22,.92);
      border:1px solid rgba(255,255,255,.12);
      padding:12px 18px;
      border-radius:14px;
      color:var(--text);
      font-size:.92rem;
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease,transform .25s ease;
      box-shadow:0 20px 55px rgba(0,0,0,.55);
      z-index:1999;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

    @media (max-width:720px){
      .panel{padding:24px}
      .link-line{flex-direction:column;align-items:flex-start}
      .hero-visual{min-height:260px}
    }
    @media (prefers-reduced-motion:reduce){
      *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:0s!important}
    }
  </style>
</head>
<body>
  <div class="bg-decor" aria-hidden="true">
    <span class="cer-grid"></span>
    <span class="cer-ring"></span>
    <span class="orb orb-1"></span>
    <span class="orb orb-2"></span>
    <span class="orb orb-3"></span>
  </div>

  <div class="scrollbar" aria-hidden="true">
    <div class="fill" id="scrollbarFill"></div>
  </div>

  <header class="hero">
    <div class="hero-inner">
      <div class="hero-copy">
        <span class="eyebrow">VSH TECH · Digital Trust Desk</span>
        <h1>Trung tâm eSign &amp; chứng chỉ</h1>
        <p>Bộ công cụ tự động giúp triển khai eSign, chứng chỉ và gói OTA an toàn chỉ trong vài phút.</p>
        <div class="hero-cta">
          <a class="btn primary" href="#esign-sec">Khởi động eSign</a>
          <a class="btn ghost" href="#download">Tải gói chứng chỉ</a>
        </div>
        <div class="hero-stats">
          <div class="stat-card">
            <strong>15</strong>
            <span>Bản eSign sẵn sàng</span>
          </div>
          <div class="stat-card">
            <strong>100%</strong>
            <span>Mirror uptime</span>
          </div>
          <div class="stat-card">
            <strong>~90s</strong>
            <span>Hoàn tất mỗi bước</span>
          </div>
          <div class="stat-card sync">
            <span>Next sync</span>
            <strong>08:00 • 15/11</strong>
            <small>Hệ thống cập nhật chứng chỉ</small>
          </div>
        </div>
      </div>
      <div class="hero-visual" aria-hidden="true">
        <div class="floating-card main">
          <span class="tag">Realtime status</span>
          <h3>Bảo mật OTA</h3>
          <p>Self-hosted CDN cùng giám sát checksum giúp an tâm triển khai.</p>
          <ul>
            <li>Chứng chỉ cập nhật theo quý</li>
            <li>A/B eSign phục vụ 24/7</li>
            <li>Hướng dẫn import tự động</li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <main class="shell">
    <section class="panel highlight" id="esign-sec">
      <div class="panel-head">
        <div>
          <span class="eyebrow">Bộ sưu tập eSign</span>
          <h2>Chọn hồ sơ phù hợp</h2>
        </div>
        <span class="pill glow">Chuẩn OTA</span>
      </div>
      <p class="desc">Mở trọn bộ 15 bản eSign đã được đóng gói với chứng chỉ tương ứng cho từng đơn vị.</p>

      <div class="acc" id="acc-more" aria-expanded="false">
        <button class="acc-hd" id="btn-esign-more" type="button" aria-controls="acc-body" aria-expanded="false">
          <div class="acc-copy">
            <strong>Hiển thị danh sách eSign</strong>
            <span>Title &amp; chứng chỉ sẽ xuất hiện ngay khi mở</span>
          </div>
          <svg class="chev" width="14" height="14" viewBox="0 0 20 20" aria-hidden="true">
            <path fill="currentColor" d="M7 5l6 5-6 5V5z"/>
          </svg>
        </button>
        <div class="acc-bd" id="acc-body">
          <div class="acc-inner">
            <div id="more-esign" class="apps"></div>
            <p class="micro" id="more-hint">Tip: sửa <code>title</code>, <code>note</code> hoặc <code>plist</code> trong mảng <code>MORE_ESIGN</code> để gắn nhãn riêng cho đội của bạn.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="panel" id="download">
      <div class="panel-head">
        <div>
          <span class="eyebrow">Tải gói chứng nhận</span>
          <h2>cert.zip</h2>
        </div>
        <span class="pill">Mirror trực tiếp</span>
      </div>
      <p class="desc">Sau khi cài eSign, tải gói chứng nhận .zip rồi import trực tiếp trong ứng dụng.</p>
      <div class="cta-row">
        <button class="btn primary" id="btn-cert">Tải cert.zip</button>
        <a class="btn ghost min" href="#steps">Xem quy trình</a>
      </div>
      <p class="hint" id="progress" hidden>Đang gửi tệp… nếu chưa thấy gói tải xuống, bấm lại hoặc mở link trực tiếp bên dưới.</p>
      <p class="ok" id="ok">Đã gửi yêu cầu tải xuống. Kiểm tra thư mục Downloads của Safari.</p>
      <div class="link-line">
        <div>
          <span class="micro muted">Link trực tiếp:</span><br>
          <a id="direct-cert" href="https://www.vshtech.online/certificate/files/cert.zip" target="_self" rel="noopener">https://www.vshtech.online/certificate/files/cert.zip</a>
        </div>
        <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="currentColor" d="M5 11h14v2H5zm7-8l5 5h-3v4h-4V8H7zM7 16h10v2H7z"/></svg>
      </div>
    </section>

    <section class="panel steps" id="steps">
      <div class="panel-head">
        <div>
          <span class="eyebrow">Lộ trình triển khai</span>
          <h2>3 bước cực nhanh</h2>
        </div>
        <span class="pill">Checklist</span>
      </div>
      <ol class="timeline">
        <li>
          <div>
            <strong>Chọn eSign tương ứng</strong>
            <p>Mở danh sách, đọc ghi chú chứng chỉ và bấm “Cài đặt”.</p>
          </div>
          <span>01</span>
        </li>
        <li>
          <div>
            <strong>Tải cert.zip</strong>
            <p>Tập tin chứa chứng chỉ đã ký, giữ nguyên tên khi lưu.</p>
          </div>
          <span>02</span>
        </li>
        <li>
          <div>
            <strong>Import &amp; kích hoạt</strong>
            <p>Mở eSign, chọn Import certificate, duyệt tới cert.zip rồi hoàn tất.</p>
          </div>
          <span>03</span>
        </li>
      </ol>
    </section>

    <p class="micro note">Hoàn tất xong nhớ quay lại <a href="/install/download/">trang tải cấu hình</a> để tiếp tục.</p>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <script>
    const WWW = 'https://www.vshtech.online';
    const LINK_CERT_DIRECT = WWW + '/certificate/files/cert.zip';

    (function fixBadCertificatePath(){
      const p = location.pathname || '';
      if (/^\/certificate\/%20target=/i.test(p) || /^\/certificate\/\s*target=/i.test(decodeURIComponent(p))) {
        location.replace(WWW + '/certificate/' + location.search + location.hash);
      }
    })();

    if (location.hostname === 'vshtech.online') {
      location.replace(WWW + location.pathname + location.search + location.hash);
    }

    (function progressBar(){
      const fill = document.getElementById('scrollbarFill');
      function update(){
        const y = window.scrollY || 0;
        const dh = document.documentElement.scrollHeight - window.innerHeight;
        const pct = dh > 0 ? Math.min(100, Math.max(0, (y / dh) * 100)) : 0;
        fill.style.width = pct + '%';
      }
      window.addEventListener('scroll', update, {passive:true});
      window.addEventListener('resize', update);
      update();
    })();

    const MORE_ESIGN = [
      { title:'ESign #1',  note:'Chứng chỉ: Viettel Group',  plist: WWW + '/certificate/plist/esign-1.plist'  },
      { title:'ESign #2',  note:'Chứng chỉ: FPT',            plist: WWW + '/certificate/plist/esign-2.plist'  },
      { title:'ESign #3',  note:'Chứng chỉ: MobiFone',       plist: WWW + '/certificate/plist/esign-3.plist'  },
      { title:'ESign #4',  note:'Chứng chỉ: VNPT',           plist: WWW + '/certificate/plist/esign-4.plist'  },
      { title:'ESign #5',  note:'Chứng chỉ: VNPAY',          plist: WWW + '/certificate/plist/esign-5.plist'  },
      { title:'ESign #6',  note:'Chứng chỉ: BIDV',           plist: WWW + '/certificate/plist/esign-6.plist'  },
      { title:'ESign #7',  note:'Chứng chỉ: ACB',            plist: WWW + '/certificate/plist/esign-7.plist'  },
      { title:'ESign #8',  note:'Chứng chỉ: Techcombank',    plist: WWW + '/certificate/plist/esign-8.plist'  },
      { title:'ESign #9',  note:'Chứng chỉ: Vietcombank',    plist: WWW + '/certificate/plist/esign-9.plist'  },
      { title:'ESign #10', note:'Chứng chỉ: MB Bank',        plist: WWW + '/certificate/plist/esign-10.plist' },
      { title:'ESign #11', note:'Chứng chỉ: TPBank',         plist: WWW + '/certificate/plist/esign-11.plist' },
      { title:'ESign #12', note:'Chứng chỉ: Agribank',       plist: WWW + '/certificate/plist/esign-12.plist' },
      { title:'ESign #13', note:'Chứng chỉ: VPBank',         plist: WWW + '/certificate/plist/esign-13.plist' },
      { title:'ESign #14', note:'Chứng chỉ: HDBank',         plist: WWW + '/certificate/plist/esign-14.plist' },
      { title:'ESign #15', note:'Chứng chỉ: Ngân hàng nội bộ', plist: WWW + '/certificate/plist/esign-15.plist' }
    ];

    (function setupAccordion(){
      const acc  = document.getElementById('acc-more');
      const hd   = document.getElementById('btn-esign-more');
      const bd   = document.getElementById('acc-body');
      const grid = document.getElementById('more-esign');
      if (!acc || !hd || !bd || !grid) return;

      let rendered = false;
      function renderCards(){
        if (rendered) return;
        MORE_ESIGN.forEach(({title,note,plist}, idx)=>{
          const card   = document.createElement('article');
          card.className = 'app-card';

          const head   = document.createElement('div');
          head.className = 'app-head';
          const icon   = document.createElement('div');
          icon.className = 'app-icon';
          icon.textContent = idx + 1;
          const titleEl = document.createElement('div');
          titleEl.className = 'app-title';
          titleEl.textContent = title;

          head.appendChild(icon);
          head.appendChild(titleEl);

          const noteEl = document.createElement('p');
          noteEl.className = 'app-note';
          noteEl.textContent = note;

          const actions = document.createElement('div');
          actions.className = 'app-actions';
          const install = document.createElement('a');
          install.className = 'btn install primary';
          install.href = 'itms-services://?action=download-manifest&url=' + encodeURIComponent(plist);
          install.textContent = 'Cài đặt';
          install.rel = 'noopener';

          actions.appendChild(install);
          card.appendChild(head);
          card.appendChild(noteEl);
          card.appendChild(actions);
          grid.appendChild(card);
        });
        rendered = true;
      }

      function openAcc(){
        acc.setAttribute('aria-expanded','true');
        hd.setAttribute('aria-expanded','true');
        renderCards();
        bd.style.maxHeight = bd.scrollHeight + 'px';
      }
      function closeAcc(){
        acc.setAttribute('aria-expanded','false');
        hd.setAttribute('aria-expanded','false');
        bd.style.maxHeight = '0px';
      }

      hd.addEventListener('click', () => {
        const isOpen = acc.getAttribute('aria-expanded') === 'true';
        if (isOpen) closeAcc(); else openAcc();
      });

      window.addEventListener('resize', () => {
        if (acc.getAttribute('aria-expanded') === 'true') {
          bd.style.maxHeight = bd.scrollHeight + 'px';
        }
      });
    })();

    function showToast(msg){
      const el = document.getElementById('toast');
      if (!el) return;
      el.textContent = msg;
      el.classList.add('show');
      setTimeout(()=> el.classList.remove('show'), 1500);
    }

    (function setupDirectZip(){
      const btnCert = document.getElementById('btn-cert');
      const tip     = document.getElementById('progress');
      const ok      = document.getElementById('ok');
      const direct  = document.getElementById('direct-cert');

      if (direct) {
        direct.setAttribute('href', LINK_CERT_DIRECT);
        direct.textContent = LINK_CERT_DIRECT;
        direct.setAttribute('target', '_self');
        direct.setAttribute('rel', 'noopener');
      }

      btnCert?.addEventListener('click', () => {
        tip?.removeAttribute('hidden');
        ok?.classList.remove('show');
        showToast('Đang gửi tệp…');

        const a = document.createElement('a');
        a.href = LINK_CERT_DIRECT;
        a.download = 'cert.zip';
        a.rel = 'noopener';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();

        setTimeout(() => {
          const iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.src = LINK_CERT_DIRECT;
          document.body.appendChild(iframe);
        }, 300);

        setTimeout(()=> ok?.classList.add('show'), 900);
      });

      document.addEventListener('click', (e) => {
        const a = e.target.closest && e.target.closest('a[href]');
        if (!a) return;
        let href = a.getAttribute('href') || '';
        if (href.includes('%20target=')) {
          e.preventDefault();
          if (/^\/certificate\/%20target=/i.test(href)) location.assign('/certificate/');
          else location.assign(LINK_CERT_DIRECT);
        }
      }, {passive:false});
    })();

    ['contextmenu','touchstart'].forEach(evt=>{
      document.addEventListener(evt, e=>{
        const onBtn = e.target.closest && e.target.closest('.btn'); if(!onBtn) return;
        if(evt==='touchstart'){
          let t; const cancel=()=>{clearTimeout(t);document.removeEventListener('touchend',cancel,{passive:true});document.removeEventListener('touchmove',cancel,{passive:true});};
          t=setTimeout(()=>{e.preventDefault();},400);
          document.addEventListener('touchend',cancel,{passive:true});
          document.addEventListener('touchmove',cancel,{passive:true});
        }
        if(evt==='contextmenu') e.preventDefault();
      }, {passive:false});
    });
  </script>

  <noscript>
    <ul>
      <li><a href="https://www.vshtech.online/certificate/files/cert.zip" target="_self" rel="noopener">Tải chứng chỉ (.zip)</a></li>
    </ul>
  </noscript>
</body>
</html>
